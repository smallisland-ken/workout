<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-8 col-lg-5 mt-3 mx-auto">
            <h2><i>My Page</i></h2>
            
            <!--ここからエラーメッセージ-->
            <% if @user.errors.any? %>
            <div id="error_explanation">
                <div class="error"><%= pluralize(@user.errors.count, "error") %> 
                    prohibited this product from being saved:
                </div>
                <ul>
                    <% @user.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                    <% end %>
                </ul>
            </div>
            <% end %>
            <!--ここまでエラーメッセージ-->
                
           <%= form_with model:@user, id: 'edit_user', local:true do |f| %>
                <div class="form-group mt-3">
                    <label>ニックネーム</label>
                    <%= f.text_field :nickname, autofocus: true, class: "form-control" %>
                </div>
               
                <div class="form-group">
                <label>プロフィール画像</label>
                    <%= f.attachment_field :profile_image, class: "form-control-file user_image" %>
                </div>
               
                <div class="form-group">
                <label>身長</label>
                    <%= f.text_field :height , class: "form-control" %>
                </div>
               
                <div class="form-group">
                <label>体重</label>
                    <%= f.text_field :weight , class: "form-control" %>
                </div>
                
                <div class="form-group">
                <label>自己紹介</label>
                    <%= f.text_area :introduction , class: "form-control" %>
                </div>
              
                <div class="form-group">
                    <%= f.submit "Update User", class: "btn btn-primary" %>
                </div>
            <% end %>
        </div>
      </div>
    </div>
</div>

<!--バリデーション-->
<script>
$(function(){
  $('#edit_user').validate({
		  rules : {
				 "user[nickname]": {
					required: true
				 },
          "user[email]": {
					required: true
				 },	
          "user[password]": {
					required: true,
                    minlength: 6
				 },
				  "user[password_confirmation]": {
					required: true,
                    minlength: 6,
          equalTo: "#user_password"

				 },
				 	"user[height]": {
					required: true,
                    number: true
				 },
				 	"user[weight]": {
					required: true,
                    number: true
				 },
				 	"user[introduction]": {
					required: true,
				 },
				 
		  },
		  messages: {
      "user[nickname]"  :{
						required: "必須項目です。入力をお願いします。"
				 },
			"user[email]"  :{
						required: "必須項目です。入力をお願いします。"
				 },
			"user[password]"  :{
						required: "必須項目です。入力をお願いします。",
	          minlength: "「パスワード」は6文字以上で入力してください"
				 },	
			"user[password_confirmation]"  :{
      			required: "必須項目です。入力をお願いします。",
            minlength: "「パスワード」は6文字以上で入力してください",
            equalTo: "「パスワード」が一致していません",
				 },	
			"user[height]"  :{
      			required: "必須項目です。入力をお願いします。",
            number: "半角数値を入力してください。"
				 },					 
			"user[weight]"  :{
      			required: "必須項目です。入力をお願いします。",
            number: "半角数値を入力してください。"
				 },	
			"user[introduction]"  :{
      			required: "必須項目です。入力をお願いします。",
				 },			 
      },
   }) 
})
</script>
