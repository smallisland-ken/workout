<div class="container">
    <div class="row">
        <div class="col-sm-12 col-md-8 col-lg-5 mt-3 mx-auto">
            <h2><i>My Page</i></h2>
            
            <!--ここからエラーメッセージ-->
            <% if @user.errors.any? %>
            <div id="error_explanation">
                <div class="error"><%= pluralize(@user.errors.count, "error") %> 
                    prohibited this product from being saved:
                </div>
                <ul>
                    <% @user.errors.full_messages.each do |message| %>
                    <li><%= message %></li>
                    <% end %>
                </ul>
            </div>
            <% end %>
            <!--ここまでエラーメッセージ-->
                
           <%= form_with model:@user, id: 'edit_user', local:true do |f| %>
                <div class="form-group mt-3">
                    <label><%= t 'users.edit.nickname' %></label>
                    <%= f.text_field :nickname, autofocus: true, class: "form-control" %>
                </div>
               
                <div class="form-group">
                <label><%= t 'users.edit.profile_image' %></label>
                    <div class="attachment_relative">
                    <%= f.attachment_field :profile_image, class:"mt-1 attachment_field" %>
                    <div class="attachment-absolute"><%= t 'devise.registrations.new.button' %></div>
                    </div>
                </div>
               
                <div class="form-group">
                <label><%= t 'users.edit.height' %></label>
                    <%= f.text_field :height , class: "form-control" %>
                </div>
               
                <div class="form-group">
                <label><%= t 'users.edit.weight' %></label>
                    <%= f.text_field :weight , class: "form-control" %>
                </div>
                
                <div class="form-group">
                <label><%= t 'users.edit.introduction' %></label>
                    <%= f.text_area :introduction , class: "form-control" %>
                </div>
              
                <div class="form-group">
                    <%= f.submit "Update User", class: "btn btn-primary" %>
                </div>
            <% end %>
        </div>
      </div>
    </div>
</div>

<!--バリデーション-->
<script>
$(function(){
  $('#edit_user').validate({
		  rules : {
				 "user[nickname]": {
					required: true
				 },
				 "user[height]": {
					required: true,
                    number: true
				 },
				 "user[weight]": {
					required: true,
                    number: true
				 },
				 "user[introduction]": {
					required: true,
				 },
				 
		  },
		  messages: {
      "user[nickname]"  :{
			    required: "<%= t 'users.edit.validation' %>"
				 },
			"user[height]"  :{
      			required: "<%= t 'users.edit.validation2' %>",
            number: "<%= t 'users.edit.validation_number' %>"
				 },					 
			"user[weight]"  :{
      			required: "<%= t 'users.edit.validation3' %>",
            number: "<%= t 'users.edit.validation_number2' %>"
				 },	
			"user[introduction]"  :{
      			required: "<%= t 'users.edit.validation4' %>",
				 },			 
      },
   }) 
})
</script>
